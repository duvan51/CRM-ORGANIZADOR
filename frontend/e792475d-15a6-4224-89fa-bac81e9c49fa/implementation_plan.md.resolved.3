# Plan de Mapeo Manual de Columnas

Este plan permite al usuario definir exactamente qué columna de cada hoja corresponde a los campos del sistema (Nombre, Fecha, Servicios).

## Cambios Propuestos

### [Backend - ETL]
#### [MODIFY] [etl.py](file:///c:/Users/duvan/OneDrive/Escritorio/proyectos/CRM-ORGANIZADOR/backend/app/etl.py)
- **[analizar_archivos](file:///c:/Users/duvan/OneDrive/Escritorio/proyectos/CRM-ORGANIZADOR/backend/app/etl.py#36-56)**: Ahora devolverá una lista de columnas por cada hoja encontrada.
- **[procesar_archivos](file:///c:/Users/duvan/OneDrive/Escritorio/proyectos/CRM-ORGANIZADOR/backend/app/etl.py#58-142)**: Recibirá un objeto de configuración que incluye el mapeo:
  `{"filename": {"sheetname": {"nombre": "col_excel_1", "fecha": "col_excel_2", ...}}}`

### [Backend - API]
#### [MODIFY] [main.py](file:///c:/Users/duvan/OneDrive/Escritorio/proyectos/CRM-ORGANIZADOR/backend/app/main.py)
- Ajustar endpoints para manejar la nueva estructura de datos de configuración.

### [Frontend - UI/UX]
#### [MODIFY] [App.jsx](file:///c:/Users/duvan/OneDrive/Escritorio/proyectos/CRM-ORGANIZADOR/frontend/src/App.jsx)
- **Nueva UI de Mapeo**: Cuando se selecciona una hoja, aparecerán 3 selectores (dropdowns) para elegir qué columna del Excel es el "Nombre", cuál la "Fecha" y cuál el "Servicio".
- **Pre-llenado Inteligente**: Intentaremos sugerir el mapeo automáticamente basándonos en los nombres de las columnas, pero el usuario podrá cambiarlo.
- **Validación**: No se permitirá procesar si falta algún mapeo en las hojas seleccionadas.

## Plan de Verificación
1. **Análisis**: Verificar que al subir un archivo aparezcan las columnas reales del Excel.
2. **Mapeo**: Cambiar el mapeo de una hoja y verificar que en el resultado final los datos se extraigan de la columna seleccionada.
3. **Robustez**: Probar con hojas que tengan nombres de columnas muy extraños.
